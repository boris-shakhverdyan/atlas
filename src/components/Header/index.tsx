import styles from './header.module.scss';
import {
    CallIcon,
    FavoriteIcon,
    ProfileIcon,
    SeenIcon,
    TelegramIcon,
    WhatsupIcon,
} from '../../icons';
import { Link } from 'react-router-dom';
import CountBlock from '../CountBlock';
import { useAppDispatch, useAppSelector } from '../../app/hooks';
import { handleLogin, setMenuMobile } from '../../features/modals/modalsSlice';
import { Search } from './Search';
import useToken from '../../hooks/useToken';

const Header = () => {
    const token = useToken();
    const seenItems = useAppSelector((state) => state.seen.items);
    const dispatch = useAppDispatch();

    const openMenu = () => {
        dispatch(setMenuMobile(true));
    };

    return (
        <div className={`p-fix top-0 left-0 w-100p ${styles.header}`}>
            <div className="wrapper">
                <div className="headerBlock f-row-betw">
                    <div className="headerLeft gap-50 d-f al-center">
                        <Search />
                    </div>
                    <Link className={styles.logoLink} to={'/'}>
                        <div className={`${styles.headerLogo} f-column al-center gap-5`}>
                            <svg
                                width="160"
                                height="80"
                                viewBox="0 0 390 128"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <g clipPath="url(#clip0_703_4421)">
                                    <path
                                        d="M326 0H64C28.6538 0 0 28.6538 0 64C0 99.3462 28.6538 128 64 128H326C361.346 128 390 99.3462 390 64C390 28.6538 361.346 0 326 0Z"
                                        fill="white"
                                    />
                                    <path
                                        d="M74.6396 86L87.1196 58H93.5196L106.04 86H99.2396L88.9996 61.28H91.5597L81.2796 86H74.6396ZM80.8796 80L82.5996 75.08H96.9996L98.7596 80H80.8796Z"
                                        fill="black"
                                    />
                                    <path
                                        d="M127.338 86V63.28H118.378V58H142.778V63.28H133.818V86H127.338Z"
                                        fill="black"
                                    />
                                    <path
                                        d="M160.32 85.999V57.999H166.8V80.719H180.84V85.999H160.32Z"
                                        fill="#D900B6"
                                    />
                                    <path
                                        d="M194.937 85.999L207.417 57.999H213.817L226.337 85.999H219.537L209.297 61.279H211.857L201.577 85.999H194.937ZM201.177 79.999L202.897 75.079H217.297L219.057 79.999H201.177Z"
                                        fill="#D900B6"
                                    />
                                    <path
                                        d="M252.442 86.4795C250.202 86.4795 248.056 86.1862 246.002 85.5995C243.949 84.9862 242.296 84.1995 241.042 83.2395L243.242 78.3595C244.442 79.2129 245.856 79.9195 247.482 80.4795C249.136 81.0129 250.802 81.2795 252.482 81.2795C253.762 81.2795 254.789 81.1595 255.562 80.9195C256.362 80.6529 256.949 80.2929 257.322 79.8395C257.696 79.3862 257.882 78.8662 257.882 78.2795C257.882 77.5329 257.589 76.9462 257.002 76.5195C256.416 76.0662 255.642 75.7062 254.682 75.4395C253.722 75.1462 252.656 74.8795 251.482 74.6395C250.336 74.3729 249.176 74.0529 248.002 73.6795C246.856 73.3062 245.802 72.8262 244.842 72.2395C243.882 71.6529 243.096 70.8795 242.482 69.9195C241.896 68.9595 241.602 67.7329 241.602 66.2395C241.602 64.6395 242.029 63.1862 242.882 61.8795C243.762 60.5462 245.069 59.4929 246.802 58.7195C248.562 57.9195 250.762 57.5195 253.402 57.5195C255.162 57.5195 256.896 57.7329 258.602 58.1595C260.309 58.5595 261.816 59.1729 263.122 59.9995L261.122 64.9195C259.816 64.1729 258.509 63.6262 257.202 63.2795C255.896 62.9062 254.616 62.7195 253.362 62.7195C252.109 62.7195 251.082 62.8662 250.282 63.1595C249.482 63.4529 248.909 63.8395 248.562 64.3195C248.216 64.7729 248.042 65.3062 248.042 65.9195C248.042 66.6395 248.336 67.2262 248.922 67.6795C249.509 68.1062 250.282 68.4529 251.242 68.7195C252.202 68.9862 253.256 69.2529 254.402 69.5195C255.576 69.7862 256.736 70.0929 257.882 70.4395C259.056 70.7862 260.122 71.2529 261.082 71.8395C262.042 72.4262 262.816 73.1995 263.402 74.1595C264.016 75.1195 264.322 76.3329 264.322 77.7995C264.322 79.3729 263.882 80.8129 263.002 82.1195C262.122 83.4262 260.802 84.4795 259.042 85.2795C257.309 86.0795 255.109 86.4795 252.442 86.4795Z"
                                        fill="#D900B6"
                                    />
                                    <path
                                        d="M90.5 34.6316C86.1466 34.6316 82.6176 38.4961 82.6176 43.2632C82.6176 48.0302 86.1466 51.8947 90.5 51.8947C94.8534 51.8947 98.3823 48.0302 98.3823 43.2632C98.3823 38.4961 94.8534 34.6316 90.5 34.6316ZM90.5 34.6316V26M84.5882 48.9705L57 108M96.4118 48.9705L124 108M122.029 77.8512C115.886 88.1094 104.077 95.0526 90.5185 95.0526C76.9325 95.0526 65.1037 88.0818 58.9707 77.7895"
                                        stroke="#D900B6"
                                        strokeWidth="6"
                                        strokeLinecap="round"
                                        strokeLinejoin="round"
                                    />
                                    <path
                                        d="M283.022 45.0133C283.022 40.4778 284.134 36.298 286.357 32.474C288.58 28.6499 291.626 25.6262 295.495 23.4029C299.363 21.1796 303.543 20.0457 308.034 20.0013C312.525 19.9568 316.705 21.0907 320.574 23.4029C324.442 25.7151 327.488 28.7388 329.711 32.474C331.935 36.2091 333.046 40.3889 333.046 45.0133C333.046 46.9254 332.58 49.1487 331.646 51.6832C330.712 54.2178 329.534 56.7746 328.111 59.3536C326.688 61.9326 325.065 64.5561 323.242 67.2241C321.419 69.892 319.64 72.3821 317.906 74.6944C316.172 77.0066 314.549 79.052 313.037 80.8307C311.525 82.6093 310.324 84.0544 309.435 85.1661L308.034 86.7002C307.679 86.3444 307.212 85.8108 306.634 85.0994C306.056 84.3879 304.877 82.9873 303.099 80.8974C301.32 78.8075 299.675 76.7176 298.163 74.6277C296.651 72.5378 294.895 70.0921 292.894 67.2908C290.893 64.4894 289.247 61.8215 287.958 59.2869C286.668 56.7524 285.49 54.24 284.423 51.7499C283.356 49.2598 282.889 47.0143 283.022 45.0133ZM291.36 45.0133C291.36 49.6378 292.983 53.573 296.229 56.819C299.475 60.0651 303.41 61.6881 308.034 61.6881C312.659 61.6881 316.594 60.0651 319.84 56.819C323.086 53.573 324.709 49.6378 324.709 45.0133C324.709 40.3889 323.086 36.4759 319.84 33.2743C316.594 30.0728 312.659 28.4276 308.034 28.3386C303.41 28.2497 299.475 29.8949 296.229 33.2743C292.983 36.6537 291.36 40.5668 291.36 45.0133Z"
                                        fill="#D900B6"
                                    />
                                    <path
                                        d="M307.554 54.3123C306.029 54.3123 304.694 54.087 303.55 53.6363C302.406 53.1683 301.513 52.5183 300.872 51.6863C300.231 50.837 299.91 49.849 299.91 48.7223C299.91 47.5956 300.222 46.6423 300.846 45.8623C301.487 45.065 302.38 44.467 303.524 44.0683C304.668 43.6523 306.011 43.4443 307.554 43.4443C309.114 43.4443 310.466 43.6523 311.61 44.0683C312.771 44.467 313.664 45.065 314.288 45.8623C314.929 46.6423 315.25 47.5956 315.25 48.7223C315.25 49.849 314.929 50.837 314.288 51.6863C313.647 52.5183 312.745 53.1683 311.584 53.6363C310.44 54.087 309.097 54.3123 307.554 54.3123ZM307.554 51.2183C308.611 51.2183 309.443 50.9843 310.05 50.5163C310.674 50.0483 310.986 49.407 310.986 48.5923C310.986 47.7776 310.674 47.145 310.05 46.6943C309.443 46.2263 308.611 45.9923 307.554 45.9923C306.514 45.9923 305.691 46.2263 305.084 46.6943C304.477 47.145 304.174 47.7776 304.174 48.5923C304.174 49.407 304.477 50.0483 305.084 50.5163C305.691 50.9843 306.514 51.2183 307.554 51.2183ZM307.554 45.5763C306.15 45.5763 304.919 45.3856 303.862 45.0043C302.822 44.623 302.007 44.0683 301.418 43.3403C300.846 42.595 300.56 41.711 300.56 40.6883C300.56 39.6136 300.855 38.695 301.444 37.9323C302.033 37.1523 302.857 36.5543 303.914 36.1383C304.971 35.705 306.185 35.4883 307.554 35.4883C308.958 35.4883 310.18 35.705 311.22 36.1383C312.277 36.5543 313.101 37.1523 313.69 37.9323C314.297 38.695 314.6 39.6136 314.6 40.6883C314.6 41.711 314.305 42.595 313.716 43.3403C313.144 44.0683 312.329 44.623 311.272 45.0043C310.215 45.3856 308.975 45.5763 307.554 45.5763ZM307.554 43.1063C308.438 43.1063 309.131 42.907 309.634 42.5083C310.154 42.1096 310.414 41.5636 310.414 40.8703C310.414 40.1423 310.145 39.579 309.608 39.1803C309.088 38.7816 308.403 38.5823 307.554 38.5823C306.722 38.5823 306.046 38.7816 305.526 39.1803C305.006 39.579 304.746 40.1423 304.746 40.8703C304.746 41.5636 304.997 42.1096 305.5 42.5083C306.003 42.907 306.687 43.1063 307.554 43.1063Z"
                                        fill="#D900B6"
                                    />
                                </g>
                                <defs>
                                    <clipPath id="clip0_703_4421">
                                        <rect width="390" height="128" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                    </Link>

                    <div className={`${styles.headerRight} gap-30 c-white d-f al-center`}>
                        <div className={`${styles.headerNav} d-f gap-30`}>
                            {/*<Link className={"d-n"} to={'/'}>*/}
                            {/*    <div className={`${styles.headerNavItem} f-column al-center gap-5`}>*/}
                            {/*        <BalanceIcon width={31} height={31}/>*/}
                            {/*    </div>*/}
                            {/*</Link>*/}
                            <Link to={'/favorites'}>
                                <div
                                    className={`${styles.headerNavItem} f-column al-center gap-5 hover-scale`}
                                >
                                    <FavoriteIcon width={34} height={31} />
                                </div>
                            </Link>
                            {/* <Link to={'/'}>
                                <div className={`${styles.headerNavItem} f-column al-center gap-5 hover-scale`}>
                                    <MessengerIcon width={34} height={34} />
                                    <CountBlock value={3} className={styles.headerCountMessenger} />
                                </div>
                            </Link> */}
                            <Link to={'/seen'}>
                                <div
                                    className={`${styles.headerNavItem} f-column al-center gap-5 hover-scale`}
                                >
                                    <SeenIcon width={34} height={31} />
                                    {seenItems.length ? (
                                        <CountBlock
                                            value={seenItems.length}
                                            className={styles.headerCountSeen}
                                        />
                                    ) : null}
                                </div>
                            </Link>
                            {token ? (
                                <Link to={'/profile'}>
                                    <div
                                        className={`${styles.headerNavItem} f-column al-center gap-5 hover-scale`}
                                    >
                                        <ProfileIcon width={31} height={31} />
                                    </div>
                                </Link>
                            ) : (
                                <div
                                    onClick={() => dispatch(handleLogin())}
                                    className={`${styles.headerNavItem} f-column cur-pointer al-center gap-5`}
                                >
                                    <ProfileIcon width={31} height={31} />
                                </div>
                            )}
                        </div>

                        <div className={`${styles.headerContacts} d-f al-center gap-30`}>
                            <a
                                href="tel:+79211000000"
                                className={`${styles.headerPhone} d-f al-center gap-10`}
                            >
                                <CallIcon width={31} height={31} />
                                <p>+7(921)100-00-00</p>
                            </a>
                            <div className={`${styles.headerSocial} d-f al-center gap-20`}>
                                <a
                                    href="#whatsapp"
                                    className={`${styles.headerSocialItem} f-c-row hover-scale`}
                                >
                                    <WhatsupIcon width={26} height={26} />
                                </a>
                                <a
                                    href="#telegram"
                                    className={`${styles.headerSocialItem} f-c-row hover-scale`}
                                >
                                    <TelegramIcon width={26} height={26} />
                                </a>
                            </div>
                        </div>
                    </div>
                    <div onClick={openMenu} className={styles.headerBurger}>
                        <svg
                            width="30"
                            height="30"
                            viewBox="0 0 20 20"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M0 4C0 1.79086 1.79086 0 4 0H9V5C9 7.20914 7.20914 9 5 9H0V4Z"
                                fill="white"
                            />
                            <path
                                d="M11 4C11 1.79086 12.7909 0 15 0H20V5C20 7.20914 18.2091 9 16 9H11V4Z"
                                fill="white"
                            />
                            <path
                                d="M0 15C0 12.7909 1.79086 11 4 11H9V16C9 18.2091 7.20914 20 5 20H0V15Z"
                                fill="white"
                            />
                            <path
                                d="M11 15C11 12.7909 12.7909 11 15 11H20V16C20 18.2091 18.2091 20 16 20H11V15Z"
                                fill="white"
                            />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default Header;
